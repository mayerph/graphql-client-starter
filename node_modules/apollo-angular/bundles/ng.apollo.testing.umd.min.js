!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("apollo-client"),require("@angular/core"),require("apollo-link"),require("graphql/language/printer"),require("apollo-angular"),require("apollo-cache-inmemory"),require("apollo-cache")):"function"==typeof define&&define.amd?define("apollo-angular/testing",["exports","apollo-client","@angular/core","apollo-link","graphql/language/printer","apollo-angular","apollo-cache-inmemory","apollo-cache"],o):o((e["apollo-angular"]=e["apollo-angular"]||{},e["apollo-angular"].testing={}),e.apollo,e.ng.core,e.apolloLink.core,e.printer,e["apollo-angular"],e.apollo.cache.inmemory,e.apolloCache)}(this,function(e,r,o,n,c,t,i,a){"use strict";var p=function f(){},l=function(){function e(e,o){this.operation=e,this.observer=o}return e.prototype.flush=function(e){var o;(o=e)&&o.hasOwnProperty("graphQLErrors")?this.observer.error(e):(this.observer.next(e),this.observer.complete())},e.prototype.networkError=function(e){var o=new r.ApolloError({networkError:e});this.flush(o)},e.prototype.graphqlErrors=function(e){this.flush({errors:e})},e}(),u=function(){function e(){this.open=[]}return e.prototype.handle=function(r){var t=this;return new n.Observable(function(e){var o=new l(r,e);t.open.push(o)})},e.prototype._match=function(o){var r=this;return"string"==typeof o?this.open.filter(function(e){return e.operation.operationName===o}):"function"==typeof o?this.open.filter(function(e){return o(e.operation)}):this.isDocumentNode(o)?this.open.filter(function(e){return c.print(e.operation.query)===c.print(o)}):this.open.filter(function(e){return r.matchOp(o,e)})},e.prototype.matchOp=function(e,o){var r=JSON.stringify(e.variables),t=JSON.stringify(e.extensions),n=this.compare(e.operationName,o.operation.operationName),i=this.compare(r,o.operation.variables),a=c.print(o.operation.query)===c.print(e.query),p=this.compare(t,o.operation.extensions);return n&&i&&a&&p},e.prototype.compare=function(e,o){var r,t="string"==typeof(r=o)?r:JSON.stringify(r);return!e||t===e},e.prototype.match=function(e){var r=this,o=this._match(e);return o.forEach(function(e){var o=r.open.indexOf(e);-1!==o&&r.open.splice(o,1)}),o},e.prototype.expectOne=function(e,o){o=o||this.descriptionFromMatcher(e);var r=this.match(e);if(1<r.length)throw new Error('Expected one matching operation for criteria "'+o+'", found '+r.length+" operations.");if(0===r.length)throw new Error('Expected one matching operation for criteria "'+o+'", found none.');return r[0]},e.prototype.expectNone=function(e,o){o=o||this.descriptionFromMatcher(e);var r=this.match(e);if(0<r.length)throw new Error('Expected zero matching operations for criteria "'+o+'", found '+r.length+".")},e.prototype.verify=function(){var e=this.open;if(0<e.length){var o=e.map(function(e){return e.operation.operationName}).join(", ");throw new Error("Expected no open operations, found "+e.length+": "+o)}},e.prototype.isDocumentNode=function(e){return!e.operationName},e.prototype.descriptionFromMatcher=function(e){return"string"==typeof e?"Match operationName: "+e:"object"!=typeof e?"Match by function: "+e.name:this.isDocumentNode(e)?"Match DocumentNode":"Match operation: "+(e.operationName||"(any)")+", variables: "+(JSON.stringify(e.variables)||"(any)")},e.decorators=[{type:o.Injectable}],e}(),s=new o.InjectionToken("apollo-angular/testing cache"),h=function(){function e(e,o,r){e.create({link:new n.ApolloLink(function(e){return o.handle(e)}),cache:r||new i.InMemoryCache({addTypename:!1})})}return e.decorators=[{type:o.NgModule,args:[{imports:[t.ApolloModule],providers:[u,{provide:p,useExisting:u}]}]}],e.ctorParameters=function(){return[{type:t.Apollo},{type:u},{type:a.ApolloCache,decorators:[{type:o.Optional},{type:o.Inject,args:[s]}]}]},e}();e.ApolloTestingController=p,e.ApolloTestingModule=h,e.APOLLO_TESTING_CACHE=s,e.TestOperation=l,e.Éµa=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng.apollo.testing.umd.min.js.map