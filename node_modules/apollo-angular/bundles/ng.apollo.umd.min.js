!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs/operators"),require("rxjs"),require("@angular/core"),require("apollo-client")):"function"==typeof define&&define.amd?define("apollo-angular",["exports","rxjs/operators","rxjs","@angular/core","apollo-client"],e):e(t["ng.apollo"]={},t.rxjs.operators,t.rxjs,t.ng.core,t.apollo)}(this,function(t,r,n,e,u){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t){return new n.Observable(function(e){return t().then(function(t){e.closed||(e.next(t),e.complete())},function(t){e.closed||e.error(t)}),function(){return e.unsubscribe()}})}var c=function(){function t(t){this.zone=t,this.now=Date.now?Date.now:function(){return+new Date}}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),this.zone.run(function(){return n.queueScheduler.schedule(t,e,r)})},t}();function a(t){return t[n.observable]=function(){return t},t}function p(t,e){return t.pipe(r.observeOn(new c(e)))}var l=function(){function t(t,e){this.obsQuery=t,this.valueChanges=p(n.from(a(this.obsQuery)),e),this.queryId=this.obsQuery.queryId}return t.prototype.result=function(){return this.obsQuery.result()},t.prototype.currentResult=function(){return this.obsQuery.currentResult()},t.prototype.getLastResult=function(){return this.obsQuery.getLastResult()},t.prototype.getLastError=function(){return this.obsQuery.getLastError()},t.prototype.resetLastResults=function(){return this.obsQuery.resetLastResults()},t.prototype.refetch=function(t){return this.obsQuery.refetch(t)},t.prototype.fetchMore=function(t){return this.obsQuery.fetchMore(t)},t.prototype.subscribeToMore=function(t){return this.obsQuery.subscribeToMore(t)},t.prototype.updateQuery=function(t){return this.obsQuery.updateQuery(t)},t.prototype.stopPolling=function(){return this.obsQuery.stopPolling()},t.prototype.startPolling=function(t){return this.obsQuery.startPolling(t)},t.prototype.setOptions=function(t){return this.obsQuery.setOptions(t)},t.prototype.setVariables=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!0),this.obsQuery.setVariables(t,e,r)},t}(),f=new e.InjectionToken("[apollo-angular] options"),h=function(){function t(t,e){this.ngZone=t,this._client=e}return t.prototype.watchQuery=function(t){return new l(this.client.watchQuery(o({},t)),this.ngZone)},t.prototype.query=function(t){var e=this;return s(function(){return e.client.query(o({},t))})},t.prototype.mutate=function(t){var e=this;return s(function(){return e.client.mutate(o({},t))})},t.prototype.subscribe=function(t,e){var r=n.from(a(this.client.subscribe(o({},t))));return e&&!0!==e.useZone?r:p(r,this.ngZone)},t.prototype.getClient=function(){return this._client},t.prototype.setClient=function(t){if(this._client)throw new Error("Client has been already defined");this._client=t},Object.defineProperty(t.prototype,"client",{get:function(){return this.beforeEach(),this._client},enumerable:!0,configurable:!0}),t.prototype.beforeEach=function(){this.checkInstance()},t.prototype.checkInstance=function(){if(!this._client)throw new Error("Client has not been defined yet")},t}(),y=function(n){function t(t,e){var r=n.call(this,t)||this;return r._ngZone=t,r.map=new Map,e&&r.createDefault(e),r}return function o(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(t,n),t.prototype.create=function(t,e){e&&"default"!==e?this.createNamed(e,t):this.createDefault(t)},t.prototype["default"]=function(){return this},t.prototype.use=function(t){return"default"===t?this["default"]():this.map.get(t)},t.prototype.createDefault=function(t){if(this.getClient())throw new Error("Apollo has been already created.");return this.setClient(new u.ApolloClient(t))},t.prototype.createNamed=function(t,e){if(this.map.has(t))throw new Error("Client "+t+" has been already created");this.map.set(t,new h(this._ngZone,new u.ApolloClient(e)))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.NgZone},{type:undefined,decorators:[{type:e.Optional},{type:e.Inject,args:[f]}]}]},t}(h),b=function(){function t(t){this.apollo=t,this.client="default"}return t.prototype.watch=function(t,e){return this.apollo.use(this.client).watchQuery(o({},e,{variables:t,query:this.document}))},t.prototype.fetch=function(t,e){return this.apollo.use(this.client).query(o({},e,{variables:t,query:this.document}))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:y}]},t}(),d=function(){function t(t){this.apollo=t,this.client="default"}return t.prototype.mutate=function(t,e){return this.apollo.use(this.client).mutate(o({},e,{variables:t,mutation:this.document}))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:y}]},t}(),g=function(){function t(t){this.apollo=t,this.client="default"}return t.prototype.subscribe=function(t,e,r){return this.apollo.use(this.client).subscribe(o({},e,{variables:t,query:this.document}),r)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:y}]},t}(),m=function(){function t(){}return t.prototype.transform=function(t,e){if(void 0===e&&(e=""),""!==e)return t&&t.data&&t.data[e]},t.decorators=[{type:e.Pipe,args:[{name:"select"}]}],t}(),w=[y],v=[m],Q=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{providers:w,declarations:v,exports:v}]}],t}();t.Apollo=y,t.ApolloBase=h,t.QueryRef=l,t.Query=b,t.Mutation=d,t.Subscription=g,t.SelectPipe=m,t.ApolloModule=Q,t.APOLLO_OPTIONS=f,t.ɵb=v,t.ɵa=w,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng.apollo.umd.min.js.map